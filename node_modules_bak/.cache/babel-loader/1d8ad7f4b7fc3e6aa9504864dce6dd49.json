{"ast":null,"code":"import _slicedToArray from\"E:/Users/Pinsho/Documents/Projects/myfavmods/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import styles from'../css/Grid.module.css';import{ACCompetizioneOtherCard}from'./ACCompetizioneOtherCard';import Airtable from'airtable';import React,{useEffect,useState}from'react';import{Spinner}from'./Spinner';import NoResults from'../pages/NoResults';import{useLocation}from'react-router-dom';import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var base=new Airtable({apiKey:\"key03qIMV5bFoWdvj\"}).base('appxdFddKFJGA9LAb');export function ACCompetizioneModsGrid(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),others=_useState2[0],setOthers=_useState2[1];var _useState3=useState(true),_useState4=_slicedToArray(_useState3,2),isLoading=_useState4[0],SetIsLoading=_useState4[1];function useQuery(){return new URLSearchParams(useLocation().search);}var query=useQuery();var search=query.get(\"search\");useEffect(function(){SetIsLoading(true);var filter=search?search:\"\";var formulaOther=\"SUM(Search('\"+filter.toLowerCase()+\"', {Name_low}),Search('\"+filter.toLowerCase()+\"', {Type_low}))\";base(\"accompetizioneother\").select({view:\"Grid view\",filterByFormula:formulaOther,sort:[{field:'Name',direction:'asc'}]}).eachPage(function(records,fetchNextPage){setOthers(records);SetIsLoading(false);fetchNextPage();});},[search]);if(isLoading){return/*#__PURE__*/_jsx(Spinner,{});}if(others.length===0){return/*#__PURE__*/_jsx(NoResults,{});}return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:styles.maintitleACOther,id:\"other\",children:\"Other\"}),/*#__PURE__*/_jsx(\"ul\",{className:styles.grid,children:others.map(function(other){return/*#__PURE__*/_jsx(ACCompetizioneOtherCard,{other:other},other.id);})})]});}","map":{"version":3,"sources":["E:/Users/Pinsho/Documents/Projects/myfavmods/src/components/ACCompetizioneModsGrid.js"],"names":["styles","ACCompetizioneOtherCard","Airtable","React","useEffect","useState","Spinner","NoResults","useLocation","base","apiKey","ACCompetizioneModsGrid","others","setOthers","isLoading","SetIsLoading","useQuery","URLSearchParams","search","query","get","filter","formulaOther","toLowerCase","select","view","filterByFormula","sort","field","direction","eachPage","records","fetchNextPage","length","maintitleACOther","grid","map","other","id"],"mappings":"kIAAA,MAAOA,CAAAA,MAAP,KAAmB,wBAAnB,CACA,OAASC,uBAAT,KAAwC,2BAAxC,CACA,MAAOC,CAAAA,QAAP,KAAqB,UAArB,CACA,MAAOC,CAAAA,KAAP,EAAgBC,SAAhB,CAA2BC,QAA3B,KAA2C,OAA3C,CACA,OAASC,OAAT,KAAwB,WAAxB,CACA,MAAOC,CAAAA,SAAP,KAAsB,oBAAtB,CACA,OAASC,WAAT,KAA4B,kBAA5B,C,6IAEA,GAAMC,CAAAA,IAAI,CAAG,GAAIP,CAAAA,QAAJ,CAAa,CAAEQ,MAAM,CAAE,mBAAV,CAAb,EAA8CD,IAA9C,CAAmD,mBAAnD,CAAb,CAEA,MAAO,SAASE,CAAAA,sBAAT,EAAkC,CACrC,cAA2BN,QAAQ,CAAC,EAAD,CAAnC,wCAAOO,MAAP,eAAeC,SAAf,eACA,eAAkCR,QAAQ,CAAC,IAAD,CAA1C,yCAAOS,SAAP,eAAkBC,YAAlB,eAEA,QAASC,CAAAA,QAAT,EAAoB,CAChB,MAAO,IAAKC,CAAAA,eAAL,CAAqBT,WAAW,GAAGU,MAAnC,CAAP,CACH,CAED,GAAMC,CAAAA,KAAK,CAAGH,QAAQ,EAAtB,CACA,GAAME,CAAAA,MAAM,CAAGC,KAAK,CAACC,GAAN,CAAU,QAAV,CAAf,CAEAhB,SAAS,CAAC,UAAM,CACZW,YAAY,CAAC,IAAD,CAAZ,CAEA,GAAMM,CAAAA,MAAM,CAAGH,MAAM,CACnBA,MADmB,CAEnB,EAFF,CAIA,GAAMI,CAAAA,YAAY,CAAG,eAAiBD,MAAM,CAACE,WAAP,EAAjB,CAAwC,yBAAxC,CAAoEF,MAAM,CAACE,WAAP,EAApE,CAA2F,iBAAhH,CAEAd,IAAI,CAAC,qBAAD,CAAJ,CACKe,MADL,CACY,CACJC,IAAI,CAAE,WADF,CAEJC,eAAe,CAAEJ,YAFb,CAGJK,IAAI,CAAC,CACD,CACIC,KAAK,CAAE,MADX,CACmBC,SAAS,CAAE,KAD9B,CADC,CAHD,CADZ,EAUKC,QAVL,CAUc,SAACC,OAAD,CAAUC,aAAV,CAA4B,CAClCnB,SAAS,CAACkB,OAAD,CAAT,CACAhB,YAAY,CAAC,KAAD,CAAZ,CACAiB,aAAa,GAChB,CAdL,EAeH,CAxBQ,CAwBN,CAACd,MAAD,CAxBM,CAAT,CA0BA,GAAIJ,SAAJ,CAAc,CACV,mBACI,KAAC,OAAD,IADJ,CAGH,CAED,GAAGF,MAAM,CAACqB,MAAP,GAAkB,CAArB,CAAuB,CACnB,mBACI,KAAC,SAAD,IADJ,CAGH,CAED,mBACI,wCACI,YAAK,SAAS,CAAEjC,MAAM,CAACkC,gBAAvB,CAAyC,EAAE,CAAC,OAA5C,mBADJ,cAEI,WAAI,SAAS,CAAElC,MAAM,CAACmC,IAAtB,UACKvB,MAAM,CAACwB,GAAP,CAAW,SAACC,KAAD,qBACR,KAAC,uBAAD,EAAwC,KAAK,CAAEA,KAA/C,EAA8BA,KAAK,CAACC,EAApC,CADQ,EAAX,CADL,EAFJ,GADJ,CAUH","sourcesContent":["import styles from '../css/Grid.module.css';\r\nimport { ACCompetizioneOtherCard } from './ACCompetizioneOtherCard';\r\nimport Airtable from 'airtable';\r\nimport React, { useEffect, useState } from 'react';\r\nimport { Spinner } from './Spinner';\r\nimport NoResults from '../pages/NoResults';\r\nimport { useLocation } from 'react-router-dom';\r\n\r\nconst base = new Airtable({ apiKey: \"key03qIMV5bFoWdvj\" }).base('appxdFddKFJGA9LAb');\r\n\r\nexport function ACCompetizioneModsGrid() {\r\n    const [others, setOthers] =useState([])\r\n    const [isLoading, SetIsLoading] = useState(true);\r\n\r\n    function useQuery() {\r\n        return new  URLSearchParams(useLocation().search);\r\n    }\r\n\r\n    const query = useQuery();\r\n    const search = query.get(\"search\");\r\n\r\n    useEffect(() => {\r\n        SetIsLoading(true);\r\n\r\n        const filter = search \r\n        ? search\r\n        : \"\";\r\n        \r\n        const formulaOther = \"SUM(Search('\" + filter.toLowerCase() + \"', {Name_low}),Search('\" + filter.toLowerCase() + \"', {Type_low}))\";\r\n\r\n        base(\"accompetizioneother\")\r\n            .select({ \r\n                view: \"Grid view\",\r\n                filterByFormula: formulaOther,\r\n                sort:[\r\n                    {\r\n                        field: 'Name', direction: 'asc'\r\n                    }\r\n                ],\r\n            })\r\n            .eachPage((records, fetchNextPage) => {\r\n                setOthers(records)\r\n                SetIsLoading(false);\r\n                fetchNextPage();\r\n            })\r\n    }, [search]);\r\n\r\n    if (isLoading){\r\n        return(\r\n            <Spinner/>\r\n        )\r\n    }\r\n\r\n    if(others.length === 0){\r\n        return(\r\n            <NoResults/>\r\n        )\r\n    }\r\n\r\n    return (\r\n        <>\r\n            <div className={styles.maintitleACOther} id=\"other\">Other</div>\r\n            <ul className={styles.grid}>\r\n                {others.map((other) => (\r\n                    <ACCompetizioneOtherCard key={other.id} other={other} />\r\n                ))}\r\n            </ul>\r\n        </>\r\n    );\r\n}"]},"metadata":{},"sourceType":"module"}