{"ast":null,"code":"import _slicedToArray from\"E:/Users/Pinsho/Documents/Projects/myfavmods/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import styles from'../css/Grid.module.css';import{MSFSModCard}from'./MSFSModCard';import{MSFSLiveriesCard}from'./MSFSLiveriesCard';import{MSFSAirportsCard}from'./MSFSAirportsCard';import{MSFSOtherCard}from'./MSFSOtherCard';import Airtable from'airtable';import React,{useEffect,useState}from'react';import{Spinner}from'./Spinner';import{useLocation}from'react-router-dom';import NoResults from'../pages/NoResults';import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var base=new Airtable({apiKey:\"key03qIMV5bFoWdvj\"}).base('appxdFddKFJGA9LAb');export function MSFSModsGrid(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),mods=_useState2[0],setMods=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),airports=_useState4[0],setAirports=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),liveries=_useState6[0],setLiveries=_useState6[1];var _useState7=useState([]),_useState8=_slicedToArray(_useState7,2),others=_useState8[0],setOthers=_useState8[1];var _useState9=useState(true),_useState10=_slicedToArray(_useState9,2),isLoading=_useState10[0],SetIsLoading=_useState10[1];function useQuery(){return new URLSearchParams(useLocation().search);}var query=useQuery();var search=query.get(\"search\");useEffect(function(){SetIsLoading(true);var filter=search?search:\"\";var formulaAddon=\"SUM(Search('\"+filter.toLowerCase()+\"', {Name_low}),Search('\"+filter.toLowerCase()+\"', {Type_low}),Search('\"+filter.toLowerCase()+\"', {Developer_low}),Search('\"+filter.toLowerCase()+\"', {Manufacturer_low}))\";var formulaLiveries=\"SUM(Search('\"+filter.toLowerCase()+\"', {Name_low}),Search('\"+filter.toLowerCase()+\"', {Airline_low}),Search('\"+filter.toLowerCase()+\"', {Airplane_low}),Search('\"+filter.toLowerCase()+\"', {Resolution_low}))\";var formulaAirports=\"SUM(Search('\"+filter.toLowerCase()+\"', {Name_low}),Search('\"+filter.toLowerCase()+\"', {OACI_low}),Search('\"+filter.toLowerCase()+\"', {Type_low}),Search('\"+filter.toLowerCase()+\"', {Location_low}))\";var formulaOther=\"SUM(Search('\"+filter.toLowerCase()+\"', {Name_low}),Search('\"+filter.toLowerCase()+\"', {Type_low}))\";base(\"msfsmods\").select({view:\"Grid view\",filterByFormula:formulaAddon,sort:[{field:'Name',direction:'asc'}]}).eachPage(function(records,fetchNextPage){setMods(records);fetchNextPage();});base(\"msfsliveries\").select({view:\"Grid view\",filterByFormula:formulaLiveries,sort:[{field:'Name',direction:'asc'}]}).eachPage(function(records,fetchNextPage){setLiveries(records);fetchNextPage();});base(\"msfsairports\").select({view:\"Grid view\",filterByFormula:formulaAirports,sort:[{field:'Name',direction:'asc'}]}).eachPage(function(records,fetchNextPage){setAirports(records);fetchNextPage();});base(\"msfsother\").select({view:\"Grid view\",filterByFormula:formulaOther,sort:[{field:'Name',direction:'asc'}]}).eachPage(function(records,fetchNextPage){setOthers(records);SetIsLoading(false);fetchNextPage();});},[search]);if(isLoading){return/*#__PURE__*/_jsx(Spinner,{});}if(mods.length===0&&airports.length===0&&liveries.length===0&&others.length===0){return/*#__PURE__*/_jsx(NoResults,{});}return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:styles.maintitleMSFSAddons,id:\"addons\",children:\"Addons\"}),/*#__PURE__*/_jsx(\"ul\",{className:styles.grid,children:mods.map(function(mod){return/*#__PURE__*/_jsx(MSFSModCard,{mod:mod},mod.id);})}),/*#__PURE__*/_jsx(\"div\",{className:styles.maintitleMSFSLiveries,id:\"liveries\",children:\"Liveries\"}),/*#__PURE__*/_jsx(\"ul\",{className:styles.grid,children:liveries.map(function(livery){return/*#__PURE__*/_jsx(MSFSLiveriesCard,{livery:livery},livery.id);})}),/*#__PURE__*/_jsx(\"div\",{className:styles.maintitleMSFSAirports,id:\"airports\",children:\"Airports\"}),/*#__PURE__*/_jsx(\"ul\",{className:styles.grid,children:airports.map(function(airport){return/*#__PURE__*/_jsx(MSFSAirportsCard,{airport:airport},airport.id);})}),/*#__PURE__*/_jsx(\"div\",{className:styles.maintitleMSFSOther,id:\"other\",children:\"Other\"}),/*#__PURE__*/_jsx(\"ul\",{className:styles.grid,children:others.map(function(other){return/*#__PURE__*/_jsx(MSFSOtherCard,{other:other},other.id);})})]});}","map":{"version":3,"sources":["E:/Users/Pinsho/Documents/Projects/myfavmods/src/components/MSFSModsGrid.js"],"names":["styles","MSFSModCard","MSFSLiveriesCard","MSFSAirportsCard","MSFSOtherCard","Airtable","React","useEffect","useState","Spinner","useLocation","NoResults","base","apiKey","MSFSModsGrid","mods","setMods","airports","setAirports","liveries","setLiveries","others","setOthers","isLoading","SetIsLoading","useQuery","URLSearchParams","search","query","get","filter","formulaAddon","toLowerCase","formulaLiveries","formulaAirports","formulaOther","select","view","filterByFormula","sort","field","direction","eachPage","records","fetchNextPage","length","maintitleMSFSAddons","grid","map","mod","id","maintitleMSFSLiveries","livery","maintitleMSFSAirports","airport","maintitleMSFSOther","other"],"mappings":"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","sourcesContent":["import styles from '../css/Grid.module.css';\r\nimport { MSFSModCard } from './MSFSModCard';\r\nimport {MSFSLiveriesCard} from './MSFSLiveriesCard'\r\nimport {MSFSAirportsCard} from './MSFSAirportsCard'\r\nimport {MSFSOtherCard} from './MSFSOtherCard'\r\nimport Airtable from 'airtable';\r\nimport React, { useEffect, useState } from 'react';\r\nimport { Spinner } from './Spinner';\r\nimport { useLocation } from 'react-router-dom';\r\nimport NoResults from '../pages/NoResults';\r\n\r\nconst base = new Airtable({ apiKey: \"key03qIMV5bFoWdvj\" }).base('appxdFddKFJGA9LAb');\r\n\r\nexport function MSFSModsGrid() {\r\n    const [mods, setMods] =useState([])\r\n    const [airports, setAirports] =useState([])\r\n    const [liveries, setLiveries] =useState([])\r\n    const [others, setOthers] =useState([])\r\n    const [isLoading, SetIsLoading] = useState(true);\r\n\r\n    function useQuery() {\r\n        return new  URLSearchParams(useLocation().search);\r\n    }\r\n\r\n    const query = useQuery();\r\n    const search = query.get(\"search\");\r\n\r\n    useEffect(() => {\r\n        SetIsLoading(true);\r\n\r\n        const filter = search \r\n        ? search\r\n        : \"\";\r\n\r\n        const formulaAddon = \"SUM(Search('\" + filter.toLowerCase() + \"', {Name_low}),Search('\" + filter.toLowerCase() + \"', {Type_low}),Search('\" + filter.toLowerCase() + \"', {Developer_low}),Search('\" + filter.toLowerCase() + \"', {Manufacturer_low}))\";\r\n        const formulaLiveries = \"SUM(Search('\" + filter.toLowerCase() + \"', {Name_low}),Search('\" + filter.toLowerCase() + \"', {Airline_low}),Search('\" + filter.toLowerCase() + \"', {Airplane_low}),Search('\" + filter.toLowerCase() + \"', {Resolution_low}))\";\r\n        const formulaAirports = \"SUM(Search('\" + filter.toLowerCase() + \"', {Name_low}),Search('\" + filter.toLowerCase() + \"', {OACI_low}),Search('\" + filter.toLowerCase() + \"', {Type_low}),Search('\" + filter.toLowerCase() + \"', {Location_low}))\";\r\n        const formulaOther = \"SUM(Search('\" + filter.toLowerCase() + \"', {Name_low}),Search('\" + filter.toLowerCase() + \"', {Type_low}))\";\r\n        \r\n        base(\"msfsmods\")\r\n            .select({ \r\n                view: \"Grid view\",\r\n                filterByFormula: formulaAddon,\r\n                sort:[\r\n                    {\r\n                        field: 'Name', direction: 'asc'\r\n                    }\r\n                ],\r\n            })\r\n            .eachPage((records, fetchNextPage) => {\r\n                setMods(records)\r\n                fetchNextPage();\r\n            })\r\n        base(\"msfsliveries\")\r\n            .select({ \r\n                view: \"Grid view\",\r\n                filterByFormula: formulaLiveries,\r\n                sort:[\r\n                    {\r\n                        field: 'Name', direction: 'asc'\r\n                    }\r\n                ],\r\n            })\r\n            .eachPage((records, fetchNextPage) => {\r\n                setLiveries(records)\r\n                fetchNextPage();\r\n            })\r\n        base(\"msfsairports\")\r\n            .select({ \r\n                view: \"Grid view\",\r\n                filterByFormula: formulaAirports,\r\n                sort:[\r\n                    {\r\n                        field: 'Name', direction: 'asc'\r\n                    }\r\n                ],\r\n            })\r\n            .eachPage((records, fetchNextPage) => {\r\n                setAirports(records)\r\n                fetchNextPage();\r\n            })\r\n        base(\"msfsother\")\r\n            .select({ \r\n                view: \"Grid view\",\r\n                filterByFormula: formulaOther,\r\n                sort:[\r\n                    {\r\n                        field: 'Name', direction: 'asc'\r\n                    }\r\n                ],\r\n            })\r\n            .eachPage((records, fetchNextPage) => {\r\n                setOthers(records)\r\n                SetIsLoading(false);\r\n                fetchNextPage();\r\n            })\r\n    }, [search]);\r\n\r\n    if (isLoading){\r\n        return(\r\n            <Spinner/>\r\n        )\r\n    }\r\n\r\n    if(mods.length === 0 && airports.length === 0 && liveries.length === 0 && others.length === 0){\r\n        return(\r\n            <NoResults/>\r\n        )\r\n    }\r\n\r\n    return (\r\n        <>\r\n            <div className={styles.maintitleMSFSAddons} id=\"addons\">Addons</div>\r\n            <ul className={styles.grid}>\r\n                {mods.map((mod) => (\r\n                    <MSFSModCard key={mod.id} mod={mod} />\r\n                ))}\r\n            </ul>\r\n            <div className={styles.maintitleMSFSLiveries} id=\"liveries\">Liveries</div>\r\n            <ul className={styles.grid}>\r\n                {liveries.map((livery) => (\r\n                    <MSFSLiveriesCard key={livery.id} livery={livery} />\r\n                ))}\r\n            </ul>\r\n            <div className={styles.maintitleMSFSAirports} id=\"airports\">Airports</div>\r\n            <ul className={styles.grid}>\r\n                {airports.map((airport) => (\r\n                    <MSFSAirportsCard key={airport.id} airport={airport} />\r\n                ))}\r\n            </ul>\r\n            <div className={styles.maintitleMSFSOther} id=\"other\">Other</div>\r\n            <ul className={styles.grid}>\r\n                {others.map((other) => (\r\n                    <MSFSOtherCard key={other.id} other={other} />\r\n                ))}\r\n            </ul>\r\n        </>\r\n    );\r\n}"]},"metadata":{},"sourceType":"module"}