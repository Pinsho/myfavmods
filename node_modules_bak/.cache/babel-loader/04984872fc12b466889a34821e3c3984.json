{"ast":null,"code":"import _slicedToArray from\"E:/Users/Pinsho/Documents/Projects/myfavmods/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import styles from'../css/Grid.module.css';import{Rfactor2CarCard}from'./Rfactor2CarCard';import{Rfactor2TrackCard}from'./Rfactor2TrackCard';import{Rfactor2OtherCard}from'./Rfactor2OtherCard';import Airtable from'airtable';import React,{useEffect,useState}from'react';import{Spinner}from'./Spinner';import NoResults from'../pages/NoResults';import{useLocation}from'react-router-dom';import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var base=new Airtable({apiKey:\"key03qIMV5bFoWdvj\"}).base('appxdFddKFJGA9LAb');export function Rfactor2ModsGrid(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),cars=_useState2[0],setCars=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),tracks=_useState4[0],setTracks=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),others=_useState6[0],setOther=_useState6[1];var _useState7=useState(true),_useState8=_slicedToArray(_useState7,2),isLoading=_useState8[0],SetIsLoading=_useState8[1];function useQuery(){return new URLSearchParams(useLocation().search);}var query=useQuery();var search=query.get(\"search\");useEffect(function(){SetIsLoading(true);var filter=search?search:\"\";var formulaCars=\"SUM(Search('\"+filter.toLowerCase()+\"', {Name_low}),Search('\"+filter.toLowerCase()+\"', {Type_low}),Search('\"+filter.toLowerCase()+\"', {WheelDrive_low}),Search('\"+filter.toLowerCase()+\"', {BHP_low}))\";var formulaTracks=\"SUM(Search('\"+filter.toLowerCase()+\"', {Name_low}),Search('\"+filter.toLowerCase()+\"', {Location_low}),Search('\"+filter.toLowerCase()+\"', {Length_low}))\";var formulaOther=\"SUM(Search('\"+filter.toLowerCase()+\"', {Name_low}),Search('\"+filter.toLowerCase()+\"', {Type_low}))\";base(\"rf2cars\").select({view:\"Grid view\",filterByFormula:formulaCars,sort:[{field:'Name',direction:'asc'}]}).eachPage(function(records,fetchNextPage){setCars(records);SetIsLoading(false);fetchNextPage();});base(\"rf2tracks\").select({view:\"Grid view\",filterByFormula:formulaTracks,sort:[{field:'Name',direction:'asc'}]}).eachPage(function(records,fetchNextPage){setTracks(records);fetchNextPage();});base(\"rfactor2other\").select({view:\"Grid view\",filterByFormula:formulaOther,sort:[{field:'Name',direction:'asc'}]}).eachPage(function(records,fetchNextPage){setOther(records);fetchNextPage();});},[search]);if(isLoading){return/*#__PURE__*/_jsx(Spinner,{});}if(cars.length===0&&tracks.length===0&&others.length===0){return/*#__PURE__*/_jsx(NoResults,{});}return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:styles.maintitleRf2Cars,id:\"cars\",children:\"Cars\"}),/*#__PURE__*/_jsx(\"ul\",{className:styles.grid,children:cars.map(function(car){return/*#__PURE__*/_jsx(Rfactor2CarCard,{car:car},car.id);})}),/*#__PURE__*/_jsx(\"div\",{className:styles.maintitleRf2Tracks,id:\"tracks\",children:\"Tracks\"}),/*#__PURE__*/_jsx(\"ul\",{className:styles.grid,children:tracks.map(function(track){return/*#__PURE__*/_jsx(Rfactor2TrackCard,{track:track},track.id);})}),/*#__PURE__*/_jsx(\"div\",{className:styles.maintitleRf2Other,id:\"other\",children:\"Other\"}),/*#__PURE__*/_jsx(\"ul\",{className:styles.grid,children:others.map(function(other){return/*#__PURE__*/_jsx(Rfactor2OtherCard,{other:other},other.id);})})]});}","map":{"version":3,"sources":["E:/Users/Pinsho/Documents/Projects/myfavmods/src/components/Rfactor2ModsGrid.js"],"names":["styles","Rfactor2CarCard","Rfactor2TrackCard","Rfactor2OtherCard","Airtable","React","useEffect","useState","Spinner","NoResults","useLocation","base","apiKey","Rfactor2ModsGrid","cars","setCars","tracks","setTracks","others","setOther","isLoading","SetIsLoading","useQuery","URLSearchParams","search","query","get","filter","formulaCars","toLowerCase","formulaTracks","formulaOther","select","view","filterByFormula","sort","field","direction","eachPage","records","fetchNextPage","length","maintitleRf2Cars","grid","map","car","id","maintitleRf2Tracks","track","maintitleRf2Other","other"],"mappings":"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","sourcesContent":["import styles from '../css/Grid.module.css';\r\nimport { Rfactor2CarCard } from './Rfactor2CarCard';\r\nimport { Rfactor2TrackCard } from './Rfactor2TrackCard';\r\nimport { Rfactor2OtherCard } from './Rfactor2OtherCard';\r\nimport Airtable from 'airtable';\r\nimport React, { useEffect, useState } from 'react';\r\nimport { Spinner } from './Spinner';\r\nimport NoResults from '../pages/NoResults';\r\nimport { useLocation } from 'react-router-dom';\r\n\r\nconst base = new Airtable({ apiKey: \"key03qIMV5bFoWdvj\" }).base('appxdFddKFJGA9LAb');\r\n\r\nexport function Rfactor2ModsGrid() {\r\n    const [cars, setCars] =useState([])\r\n    const [tracks, setTracks] =useState([])\r\n    const [others, setOther] =useState([])\r\n    const [isLoading, SetIsLoading] = useState(true);\r\n\r\n    function useQuery() {\r\n        return new  URLSearchParams(useLocation().search);\r\n    }\r\n\r\n    const query = useQuery();\r\n    const search = query.get(\"search\");\r\n\r\n    useEffect(() => {\r\n        SetIsLoading(true);\r\n\r\n        const filter = search \r\n        ? search\r\n        : \"\";\r\n\r\n        const formulaCars = \"SUM(Search('\" + filter.toLowerCase() + \"', {Name_low}),Search('\" + filter.toLowerCase() + \"', {Type_low}),Search('\" + filter.toLowerCase() + \"', {WheelDrive_low}),Search('\" + filter.toLowerCase() + \"', {BHP_low}))\";\r\n        const formulaTracks = \"SUM(Search('\" + filter.toLowerCase() + \"', {Name_low}),Search('\" + filter.toLowerCase() + \"', {Location_low}),Search('\" + filter.toLowerCase() + \"', {Length_low}))\";\r\n        const formulaOther = \"SUM(Search('\" + filter.toLowerCase() + \"', {Name_low}),Search('\" + filter.toLowerCase() + \"', {Type_low}))\";\r\n\r\n        base(\"rf2cars\")\r\n        .select({ \r\n            view: \"Grid view\",\r\n            filterByFormula: formulaCars,\r\n            sort:[\r\n                {\r\n                    field: 'Name', direction: 'asc'\r\n                }\r\n            ],\r\n        })\r\n            .eachPage((records, fetchNextPage) => {\r\n                setCars(records)\r\n                SetIsLoading(false);\r\n                fetchNextPage();\r\n            })\r\n        base(\"rf2tracks\")\r\n            .select({ \r\n                view: \"Grid view\",\r\n                filterByFormula: formulaTracks,\r\n                sort:[\r\n                    {\r\n                        field: 'Name', direction: 'asc'\r\n                    }\r\n                ],\r\n            })\r\n            .eachPage((records, fetchNextPage) => {\r\n                setTracks(records)\r\n                fetchNextPage();\r\n            })\r\n        base(\"rfactor2other\")\r\n            .select({ \r\n                view: \"Grid view\",\r\n                filterByFormula: formulaOther,\r\n                sort:[\r\n                    {\r\n                        field: 'Name', direction: 'asc'\r\n                    }\r\n                ],\r\n            })\r\n            .eachPage((records, fetchNextPage) => {\r\n                setOther(records)\r\n                fetchNextPage();\r\n            })\r\n    }, [search]);\r\n\r\n    if (isLoading){\r\n        return(\r\n            <Spinner/>\r\n        )\r\n    }\r\n\r\n    if(cars.length === 0 && tracks.length === 0 && others.length === 0){\r\n        return(\r\n            <NoResults/>\r\n        )\r\n    }\r\n\r\n    return (\r\n        <>\r\n            <div className={styles.maintitleRf2Cars} id=\"cars\">Cars</div>\r\n            <ul className={styles.grid}>\r\n                {cars.map((car) => (\r\n                    <Rfactor2CarCard key={car.id} car={car} />\r\n                ))}\r\n            </ul>\r\n            <div className={styles.maintitleRf2Tracks} id=\"tracks\">Tracks</div>\r\n            <ul className={styles.grid}>\r\n                {tracks.map((track) => (\r\n                    <Rfactor2TrackCard key={track.id} track={track} />\r\n                ))}\r\n            </ul>\r\n            <div className={styles.maintitleRf2Other} id=\"other\">Other</div>\r\n            <ul className={styles.grid}>\r\n                {others.map((other) => (\r\n                    <Rfactor2OtherCard key={other.id} other={other} />\r\n                ))}\r\n            </ul>\r\n        </>\r\n    );\r\n}"]},"metadata":{},"sourceType":"module"}