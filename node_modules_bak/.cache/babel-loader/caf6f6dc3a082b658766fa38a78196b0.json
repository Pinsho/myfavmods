{"ast":null,"code":"import _slicedToArray from\"E:/Users/Pinsho/Documents/Projects/myfavmods/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import styles from'../css/Grid.module.css';import'../css/Grid.module.css';import{DCSModCard}from'./DCSModCard';import{DCSMissionCard}from'./DCSMissionCard';import{DCSOtherCard}from'./DCSOtherCard';import Airtable from'airtable';import React,{useEffect,useState}from'react';import{Spinner}from'./Spinner';import{useLocation}from'react-router-dom';import NoResults from'../pages/NoResults';import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var base=new Airtable({apiKey:\"key03qIMV5bFoWdvj\"}).base('appxdFddKFJGA9LAb');export function DCSModsGrid(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),mods=_useState2[0],setMods=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),missions=_useState4[0],setMissions=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),others=_useState6[0],setOther=_useState6[1];var _useState7=useState(true),_useState8=_slicedToArray(_useState7,2),isLoading=_useState8[0],SetIsLoading=_useState8[1];function useQuery(){return new URLSearchParams(useLocation().search);}var query=useQuery();var search=query.get(\"search\");useEffect(function(){SetIsLoading(true);var filter=search?search:\"\";var formulaMods=\"SUM(Search('\"+filter.toLowerCase()+\"', {Name_low}),Search('\"+filter.toLowerCase()+\"', {Type_low}),Search('\"+filter.toLowerCase()+\"', {Manufacturer_low}),Search('\"+filter.toLowerCase()+\"', {Year}))\";var formulaMissions=\"SUM(Search('\"+filter.toLowerCase()+\"', {Name_low}),Search('\"+filter.toLowerCase()+\"', {Type_low}),Search('\"+filter.toLowerCase()+\"', {Unit_low}),Search('\"+filter.toLowerCase()+\"', {Map_low}),Search('\"+filter.toLowerCase()+\"', {AditionalMods_low}))\";var formulaOther=\"SUM(Search('\"+filter.toLowerCase()+\"', {Name_low}),Search('\"+filter.toLowerCase()+\"', {Type_low}))\";base(\"dcsmods\").select({view:\"Grid view\",/* === USE filterByFormula: \"Search('Some_Text',{Field_Name})\" === */ /* filterByFormula: \"Search('\" + filter.toLowerCase() + \"', {Name_low})\", */filterByFormula:formulaMods,sort:[{field:'Name',direction:'asc'}]}).eachPage(function(records,fetchNextPage){setMods(records);fetchNextPage();});base(\"dcsmissions\").select({view:\"Grid view\",filterByFormula:formulaMissions,sort:[{field:'Name',direction:'asc'}]}).eachPage(function(records,fetchNextPage){setMissions(records);fetchNextPage();});base(\"dcsother\").select({view:\"Grid view\",filterByFormula:formulaOther,sort:[{field:'Name',direction:'asc'}]}).eachPage(function(records,fetchNextPage){setOther(records);fetchNextPage();SetIsLoading(false);});},[search]);if(isLoading){return/*#__PURE__*/_jsx(Spinner,{});}if(mods.length===0&&missions.length===0&&others.length===0){return/*#__PURE__*/_jsx(NoResults,{});}return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:styles.maintitleDCSMods,id:\"mods\",children:\"MODs\"}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"ul\",{className:styles.grid,children:mods.map(function(mod){return/*#__PURE__*/_jsx(DCSModCard,{mod:mod},mod.id);})})}),/*#__PURE__*/_jsx(\"div\",{className:styles.maintitleDCSMissions,id:\"missions\",children:\"Missions\"}),/*#__PURE__*/_jsx(\"ul\",{className:styles.grid,children:missions.map(function(mission){return/*#__PURE__*/_jsx(DCSMissionCard,{mission:mission},mission.id);})}),/*#__PURE__*/_jsx(\"div\",{className:styles.maintitleDCSOther,id:\"other\",children:\"Other\"}),/*#__PURE__*/_jsx(\"ul\",{className:styles.grid,children:others.map(function(other){return/*#__PURE__*/_jsx(DCSOtherCard,{other:other},other.id);})})]});}","map":{"version":3,"sources":["E:/Users/Pinsho/Documents/Projects/myfavmods/src/components/DCSModsGrid.js"],"names":["styles","DCSModCard","DCSMissionCard","DCSOtherCard","Airtable","React","useEffect","useState","Spinner","useLocation","NoResults","base","apiKey","DCSModsGrid","mods","setMods","missions","setMissions","others","setOther","isLoading","SetIsLoading","useQuery","URLSearchParams","search","query","get","filter","formulaMods","toLowerCase","formulaMissions","formulaOther","select","view","filterByFormula","sort","field","direction","eachPage","records","fetchNextPage","length","maintitleDCSMods","grid","map","mod","id","maintitleDCSMissions","mission","maintitleDCSOther","other"],"mappings":"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","sourcesContent":["import styles from '../css/Grid.module.css';\r\nimport '../css/Grid.module.css';\r\nimport { DCSModCard } from './DCSModCard';\r\nimport { DCSMissionCard } from './DCSMissionCard';\r\nimport { DCSOtherCard } from './DCSOtherCard';\r\nimport Airtable from 'airtable';\r\nimport React, { useEffect, useState } from 'react';\r\nimport { Spinner } from './Spinner';\r\nimport { useLocation } from 'react-router-dom';\r\nimport NoResults from '../pages/NoResults';\r\n\r\nconst base = new Airtable({ apiKey: \"key03qIMV5bFoWdvj\" }).base('appxdFddKFJGA9LAb');\r\n\r\n\r\nexport function DCSModsGrid() {\r\n\r\n    const [mods, setMods] = useState([]);\r\n    const [missions, setMissions] = useState([]);\r\n    const [others, setOther] = useState([]);\r\n    const [isLoading, SetIsLoading] = useState(true);\r\n    \r\n    function useQuery() {\r\n        return new URLSearchParams(useLocation().search);\r\n    }\r\n\r\n    const query = useQuery();\r\n    const search = query.get(\"search\");\r\n\r\n    useEffect(() => {\r\n        SetIsLoading(true);\r\n\r\n        const filter = search \r\n        ? search\r\n        : \"\";\r\n\r\n        const formulaMods = \"SUM(Search('\" + filter.toLowerCase() + \"', {Name_low}),Search('\" + filter.toLowerCase() + \"', {Type_low}),Search('\" + filter.toLowerCase() + \"', {Manufacturer_low}),Search('\" + filter.toLowerCase() + \"', {Year}))\";\r\n        const formulaMissions = \"SUM(Search('\" + filter.toLowerCase() + \"', {Name_low}),Search('\" + filter.toLowerCase() + \"', {Type_low}),Search('\" + filter.toLowerCase() + \"', {Unit_low}),Search('\" + filter.toLowerCase() + \"', {Map_low}),Search('\" + filter.toLowerCase() + \"', {AditionalMods_low}))\";\r\n        const formulaOther = \"SUM(Search('\" + filter.toLowerCase() + \"', {Name_low}),Search('\" + filter.toLowerCase() + \"', {Type_low}))\";\r\n\r\n        base(\"dcsmods\")\r\n            .select({ \r\n                view: \"Grid view\",\r\n                /* === USE filterByFormula: \"Search('Some_Text',{Field_Name})\" === */\r\n                /* filterByFormula: \"Search('\" + filter.toLowerCase() + \"', {Name_low})\", */\r\n                filterByFormula: formulaMods,\r\n                sort:[\r\n                    {\r\n                        field: 'Name', direction: 'asc'\r\n                    }\r\n                ],\r\n            })\r\n            .eachPage((records, fetchNextPage) => {\r\n                setMods(records)\r\n                fetchNextPage();\r\n                \r\n            })\r\n        base(\"dcsmissions\")\r\n            .select({ \r\n                view: \"Grid view\",\r\n                filterByFormula: formulaMissions,\r\n                sort:[\r\n                    {\r\n                        field: 'Name', direction: 'asc'\r\n                    }\r\n                ],\r\n            })\r\n            .eachPage((records, fetchNextPage) => {\r\n                setMissions(records)\r\n                fetchNextPage();\r\n            })\r\n        base(\"dcsother\")\r\n            .select({ \r\n                view: \"Grid view\",\r\n                filterByFormula: formulaOther,\r\n                sort:[\r\n                    {\r\n                        field: 'Name', direction: 'asc'\r\n                    }\r\n                ],\r\n            })\r\n            .eachPage((records, fetchNextPage) => {\r\n                setOther(records)\r\n                fetchNextPage();\r\n                SetIsLoading(false)\r\n            })\r\n            \r\n    }, [search]);\r\n\r\n    \r\n\r\n    if (isLoading){\r\n        return(\r\n            <Spinner/>\r\n        )\r\n    }\r\n    \r\n    if(mods.length === 0 && missions.length === 0 && others.length === 0){\r\n        return(\r\n            <NoResults/>\r\n        )\r\n    }\r\n    \r\n    return (\r\n        <>\r\n            <div className={styles.maintitleDCSMods} id=\"mods\">MODs</div>\r\n            <div>\r\n                <ul className={styles.grid}>\r\n                    {mods.map((mod) => (\r\n                        <DCSModCard key={mod.id} mod={mod} />\r\n                    ))}\r\n                </ul>\r\n            </div>\r\n            <div className={styles.maintitleDCSMissions} id=\"missions\">Missions</div>\r\n            <ul className={styles.grid}>\r\n                {missions.map((mission) => (\r\n                    <DCSMissionCard key={mission.id} mission={mission} />\r\n                ))}\r\n            </ul>\r\n            <div className={styles.maintitleDCSOther} id=\"other\">Other</div>\r\n            <ul className={styles.grid}>\r\n                {others.map((other) => (\r\n                    <DCSOtherCard key={other.id} other={other} />\r\n                ))}\r\n            </ul>\r\n        </>\r\n    );\r\n}\r\n"]},"metadata":{},"sourceType":"module"}